# SpatialSamplingPro 技术栈

**原则**: 最简单但最健壮（Simplest but Most Robust）

## 核心技术栈

### 编程语言
- **Python 3.10+** - 主要开发语言
- **类型提示** - 使用typing模块增强代码可读性

### 地理空间处理
- **geopandas >= 0.14.0** - 地理数据处理
- **shapely >= 2.0.0** - 几何运算
- **pyproj >= 3.6.0** - 坐标系转换
- **osmnx >= 2.0.0** - OpenStreetMap路网数据
- **networkx >= 3.1** - 图算法（路网分析）

### 数据处理
- **numpy >= 1.24.0** - 数值计算
- **pandas >= 2.0.0** - 数据表格处理
- **scipy >= 1.10.0** - 科学计算
- **scikit-learn >= 1.3.0** - 聚类和优化算法

### 可视化
- **matplotlib >= 3.7.0** - 静态图表
- **seaborn >= 0.12.0** - 统计可视化
- **folium >= 0.14.0** - 交互式地图

### 工具库
- **pyyaml >= 6.0.0** - YAML配置文件
- **click >= 8.1.0** - 命令行接口

## 开发工具

### 包管理
- **uv** (推荐) - 快速的Python包管理器
- **poetry** (备选) - 依赖管理和打包

### 代码质量
- **pytest** - 单元测试框架
- **black** - 代码格式化
- **flake8** - 代码检查
- **mypy** - 类型检查
- **pre-commit** - Git钩子

### 文档
- **mkdocs** + **mkdocs-material** - 文档生成
- **mkdocstrings** - API文档自动生成

## 项目架构原则

### 模块化设计
```
ssp/
├── sampling/          # 采样策略模块
│   ├── base.py       # 抽象基类（必须先读）
│   ├── grid.py       # 网格采样
│   └── road_network.py # 路网采样
├── metadata/          # 元数据管理
├── reproducibility/   # 可复现性框架
├── visualization/     # 可视化工具
└── utils/            # 工具函数
```

### 关键原则
1. **单一职责** - 每个模块只负责一个功能
2. **开闭原则** - 对扩展开放，对修改关闭
3. **依赖注入** - 使用配置对象而非硬编码
4. **类型安全** - 使用类型提示
5. **文档完善** - 每个函数都有docstring

## 数据流

```mermaid
graph LR
    A[输入: AOI边界] --> B[采样策略]
    B --> C[采样点: GeoJSON]
    C --> D[元数据管理]
    D --> E[协议文件: YAML]
    C --> F[可视化]
    F --> G[输出: 地图/图表]
```

## 关键设计决策

### 为什么选择这个技术栈？

1. **geopandas + shapely** - Python地理空间处理的黄金标准
2. **osmnx** - 获取路网数据的最简单方式
3. **folium** - 最轻量的交互式地图方案
4. **click** - Python CLI的标准库
5. **pytest** - 最成熟的测试框架

### 避免的复杂性

- ❌ 不使用深度学习框架（过重）
- ❌ 不使用Web框架（无需后端）
- ❌ 不使用数据库（SQLite已足够）
- ❌ 不使用异步编程（无需高并发）

## 性能考虑

- 预期处理：< 10万个采样点
- 内存占用：< 4GB
- 运行时间：< 5分钟（单次采样）

## 依赖最小化原则

只添加必需的依赖。每个新依赖需要：
1. 明确的使用场景
2. 活跃的维护
3. 良好的文档
