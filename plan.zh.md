# SVIPro å¼€å‘è®¡åˆ’

**SVI Research Protocol & Optimization**: é¢å‘å¯å¤ç°è¡—æ™¯å½±åƒé‡‡æ ·è®¾è®¡çš„æ ‡å‡†åŒ–æ¡†æ¶

---

## 1. æ¨¡å‹ä¸æ–¹æ³•è®º

### 1.1 æ ¸å¿ƒé—®é¢˜é™ˆè¿°

å½“å‰çš„è¡—æ™¯å½±åƒï¼ˆSVIï¼‰ç ”ç©¶å­˜åœ¨**æ•°æ®é‡‡æ ·æ–¹æ³•ç¼ºä¹æ ‡å‡†åŒ–ã€é€æ˜åº¦å’Œå¯å¤ç°æ€§**çš„é—®é¢˜ï¼Œå¯¼è‡´ï¼š

- âŒ éšæ„çš„é‡‡æ ·é—´éš”ï¼ˆ50ç±³ï¼Ÿ100ç±³ï¼Ÿç¼ºä¹ç§‘å­¦ä¾æ®ï¼‰
- âŒ ç©ºé—´è¦†ç›–ä¸å®Œæ•´æˆ–æ•°æ®å†—ä½™
- âŒ è®¡åˆ’åæ ‡ä¸å®é™…SVIä½ç½®å­˜åœ¨åœ°ç†åæ ‡åå·®
- âŒ é»‘ç®±å¼æ–¹æ³•å­¦ï¼Œæ— æ³•å¤ç°
- âŒ æ— æ³•è·¨åŒºåŸŸã€è·¨å°ºåº¦æ¯”è¾ƒç ”ç©¶ç»“æœ

### 1.2 æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼šæ ‡å‡†åŒ–é‡‡æ ·æ¡†æ¶

åŸºäº**"èœ˜è››ç½‘å¼é‡‡é›†æ–¹æ³•"**ï¼ˆWang et al., 2025ï¼‰ï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ª**ç§‘å­¦ã€å¯å¤ç°ã€æœ‰å®Œæ•´æ–‡æ¡£**çš„é‡‡æ ·è®¾è®¡æ¡†æ¶ï¼Œ**ä¸å®é™…çˆ¬å–SVIæ•°æ®**ï¼Œè€Œæ˜¯**ç”Ÿæˆæ ‡å‡†åŒ–çš„é‡‡æ ·åè®®**ã€‚

**æ ¸å¿ƒåˆ›æ–°**ï¼š

1. **ç§‘å­¦çš„é‡‡æ ·ç­–ç•¥** - å¤šç§ç®—æ³•ï¼Œå‚æ•°é€æ˜å¯è°ƒ
2. **å…ƒæ•°æ®é©±åŠ¨çš„åè®®** - å®Œæ•´è®°å½•æ‰€æœ‰é‡‡æ ·å†³ç­–
3. **å¯å¤ç°æ€§ä¿è¯** - ç›¸åŒAOI + ç›¸åŒå‚æ•° = å®Œå…¨ç›¸åŒçš„ç»“æœ
4. **è´¨é‡è¯„ä¼°** - å†…ç½®è¦†ç›–åº¦æŒ‡æ ‡å’Œåå·®æ£€æµ‹
5. **åˆè§„ä¼˜å…ˆ** - è¾“å‡ºåˆæ³•APIä½¿ç”¨çš„åè®®ï¼Œè€Œéå¤§è§„æ¨¡çˆ¬å–

---

## 2. å®ç°æ„¿æ™¯

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒé‡‡æ ·ç®—æ³•ï¼ˆMVPï¼‰
**ç›®æ ‡**ï¼šä¸ºéšæ„ç½‘æ ¼é‡‡æ ·æä¾›ç§‘å­¦æ›¿ä»£æ–¹æ¡ˆ

**åŠŸèƒ½**ï¼š
- âœ… ç½‘æ ¼é‡‡æ ·ï¼ˆåŸºå‡†æ–¹æ³•ï¼Œå®Œå…¨å¯å¤ç°ï¼‰
- âœ… è·¯ç½‘é‡‡æ ·ï¼ˆåŸºäºOSMï¼Œæ²¿é“è·¯å¸ƒç‚¹ï¼‰
- âœ… ä¼˜åŒ–è¦†ç›–é‡‡æ ·ï¼ˆè´ªå¿ƒç®—æ³•ï¼‰
- âœ… åˆ†å±‚éšæœºé‡‡æ ·ï¼ˆç»Ÿè®¡å­¦æœ‰æ•ˆæ€§ï¼‰

**è¾“å‡º**ï¼šåŒ…å«é‡‡æ ·ç‚¹çš„GeoJSON + å®Œæ•´å…ƒæ•°æ®YAML

### ç¬¬äºŒé˜¶æ®µï¼šå…ƒæ•°æ®ä¸å¯å¤ç°æ€§
**ç›®æ ‡**ï¼šç¡®ä¿å®Œå…¨çš„æ–¹æ³•å­¦é€æ˜åº¦

**åŠŸèƒ½**ï¼š
- âœ… åè®®è®°å½•å™¨ï¼ˆè·Ÿè¸ªæ‰€æœ‰å‚æ•°ã€æ—¶é—´æˆ³ã€ç‰ˆæœ¬ï¼‰
- âœ… å…ƒæ•°æ®ç”Ÿæˆå™¨ï¼ˆç¬¦åˆFAIRåŸåˆ™çš„æ•°æ®æè¿°ï¼‰
- âœ… è´¨é‡æŒ‡æ ‡ï¼ˆè¦†ç›–å¯†åº¦ã€ç©ºé—´åˆ†å¸ƒåˆ†æï¼‰
- âœ… å¯å¤ç°æ€§æŠ¥å‘Šï¼ˆè‡ªåŠ¨ç”Ÿæˆæ–¹æ³•å­¦éƒ¨åˆ†ï¼‰

**è¾“å‡º**ï¼šç”¨äºå‘è¡¨çš„æ ‡å‡†åè®®æ–‡ä»¶

### ç¬¬ä¸‰é˜¶æ®µï¼šå¯è§†åŒ–ä¸è¯„ä¼°
**ç›®æ ‡**ï¼šå¸®åŠ©ç ”ç©¶è€…ç†è§£å’ŒéªŒè¯å…¶é‡‡æ ·è®¾è®¡

**åŠŸèƒ½**ï¼š
- âœ… äº¤äº’å¼åœ°å›¾ï¼ˆåŸºäºfoliumï¼‰
- âœ… è¦†ç›–åˆ†æï¼ˆç©ºé—´åˆ†å¸ƒæŒ‡æ ‡ï¼‰
- âœ… å¯¹æ¯”å·¥å…·ï¼ˆæ¯”è¾ƒå¤šç§é‡‡æ ·ç­–ç•¥ï¼‰
- âœ… åå·®æ£€æµ‹ï¼ˆè¯†åˆ«é‡‡æ ·ä¸è¶³/è¿‡åº¦çš„åŒºåŸŸï¼‰

**è¾“å‡º**ï¼šå¯ç›´æ¥å‘è¡¨çš„å›¾è¡¨å’Œè´¨é‡æŠ¥å‘Š

### ç¬¬å››é˜¶æ®µï¼šAPIæˆæœ¬ä¼˜åŒ–ï¼ˆæœªæ¥ï¼‰
**ç›®æ ‡**ï¼šä½¿åˆæ³•APIä½¿ç”¨å¯¹ç ”ç©¶è€…è€Œè¨€å¯è´Ÿæ‹…

**åŠŸèƒ½**ï¼š
- â³ æˆæœ¬ä¼°ç®—å™¨ï¼ˆé‡‡é›†å‰è®¡ç®—APIè´¹ç”¨ï¼‰
- â³ é‡‡æ ·ä¼˜åŒ–ï¼ˆåœ¨æœ€å¤§åŒ–è¦†ç›–çš„åŒæ—¶æœ€å°åŒ–é‡‡æ ·ç‚¹æ•°ï¼‰
- â³ é‡å¤æ£€æµ‹ï¼ˆé¿å…å†—ä½™APIè°ƒç”¨ï¼‰
- â³ å¤šæºå¯¹æ¯”ï¼ˆGSV vs BSV vs Mapillaryï¼‰

---

## 3. æŠ€æœ¯æ ˆ

### 3.1 æ ¸å¿ƒä¾èµ–

```yaml
åœ°ç†ç©ºé—´å¤„ç†:
  - geopandas >= 0.14.0    # ç©ºé—´æ•°æ®å¤„ç†
  - shapely >= 2.0.0       # å‡ ä½•è¿ç®—
  - pyproj >= 3.6.0        # åæ ‡è½¬æ¢
  - osmnx >= 2.0.0         # OpenStreetMapè·¯ç½‘
  - networkx >= 3.1        # å›¾ç®—æ³•

æ•°æ®ä¸æ•°å­¦:
  - numpy >= 1.24.0        # æ•°å€¼è®¡ç®—
  - pandas >= 2.0.0        # æ•°æ®æ“ä½œ
  - scipy >= 1.10.0        # ç©ºé—´ç®—æ³•
  - scikit-learn >= 1.3.0  # èšç±»å’Œä¼˜åŒ–

å¯è§†åŒ–:
  - matplotlib >= 3.7.0    # é™æ€å›¾è¡¨
  - seaborn >= 0.12.0      # ç»Ÿè®¡å¯è§†åŒ–
  - folium >= 0.14.0       # äº¤äº’å¼åœ°å›¾

å·¥å…·åº“:
  - pyyaml >= 6.0.0        # é…ç½®æ–‡ä»¶
  - click >= 8.1.0         # å‘½ä»¤è¡Œæ¥å£
```

### 3.2 æ¶æ„è®¾è®¡

```
svipro/
â”œâ”€â”€ sampling/              # é‡‡æ ·ç­–ç•¥
â”‚   â”œâ”€â”€ base.py           # æŠ½è±¡åŸºç±»
â”‚   â”œâ”€â”€ grid.py           # è§„åˆ™ç½‘æ ¼é‡‡æ ·
â”‚   â”œâ”€â”€ road_network.py   # åŸºäºè·¯ç½‘çš„é‡‡æ ·
â”‚   â””â”€â”€ optimized.py      # è¦†ç›–ä¼˜åŒ–é‡‡æ ·
â”‚
â”œâ”€â”€ metadata/              # å…ƒæ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ protocol.py       # åè®®è®°å½•
â”‚   â”œâ”€â”€ quality.py        # è´¨é‡æŒ‡æ ‡
â”‚   â””â”€â”€ export.py         # GeoJSON/YAMLå¯¼å‡º
â”‚
â”œâ”€â”€ reproducibility/       # å¯å¤ç°æ€§æ¡†æ¶
â”‚   â””â”€â”€ recorder.py       # è‡ªåŠ¨æ–¹æ³•æ–‡æ¡£åŒ–
â”‚
â”œâ”€â”€ visualization/         # å¯è§†åŒ–å·¥å…·
â”‚   â”œâ”€â”€ maps.py           # äº¤äº’å¼åœ°å›¾ï¼ˆfoliumï¼‰
â”‚   â”œâ”€â”€ analysis.py       # è¦†ç›–åˆ†æ
â”‚   â””â”€â”€ comparison.py     # ç­–ç•¥å¯¹æ¯”
â”‚
â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
    â”œâ”€â”€ spatial.py        # ç©ºé—´è¾…åŠ©å‡½æ•°
    â””â”€â”€ validation.py     # è¾“å…¥éªŒè¯
```

### 3.3 è®¾è®¡åŸåˆ™

1. **æ¨¡å—åŒ–** - æ¯ä¸ªé‡‡æ ·ç­–ç•¥ç‹¬ç«‹ä¸”å¯æ›¿æ¢
2. **é€æ˜æ€§** - æ¯ä¸ªå‚æ•°éƒ½æœ‰æ—¥å¿—è®°å½•å’Œæ–‡æ¡£
3. **å¯æµ‹è¯•æ€§** - ç¡®å®šæ€§ç®—æ³•ï¼ˆåŸºäºç§å­çš„éšæœºï¼‰
4. **å¯æ‰©å±•æ€§** - æ˜“äºæ·»åŠ æ–°çš„é‡‡æ ·ç­–ç•¥
5. **åˆè§„æ€§** - æ— çˆ¬å–ï¼Œä»…ç”Ÿæˆåè®®

---

## 4. ç”¨æˆ·æ¥å£

### 4.1 Python API

#### åŸºç¡€ç”¨æ³•

```python
from svipro import GridSampling, MetadataManager
from shapely.geometry import box

# å®šä¹‰ç ”ç©¶åŒºåŸŸï¼ˆAOIï¼‰
aoi = box(114.15, 22.27, 114.18, 22.30)  # é¦™æ¸¯ä¸­ç¯

# åˆå§‹åŒ–é‡‡æ ·ç­–ç•¥
strategy = GridSampling(spacing=100, seed=42)

# ç”Ÿæˆé‡‡æ ·ç‚¹
points = strategy.generate(aoi)

# å¯¼å‡ºå«å…ƒæ•°æ®çš„ç»“æœ
strategy.to_geojson("sampling_points.geojson")

# ç”Ÿæˆåè®®æ–‡æ¡£
metadata = MetadataManager()
metadata.record_protocol(strategy)
metadata.save("sampling_protocol.yaml")

# è·å–è´¨é‡æŒ‡æ ‡
metrics = strategy.calculate_coverage_metrics()
print(f"ç”Ÿæˆäº† {metrics['n_points']} ä¸ªé‡‡æ ·ç‚¹")
print(f"å¯†åº¦: {metrics['density_pts_per_km2']} ç‚¹/å¹³æ–¹å…¬é‡Œ")
```

#### é«˜çº§ç”¨æ³•ï¼šå¯¹æ¯”ç­–ç•¥

```python
from svipro import GridSampling, RoadNetworkSampling
from svipro.visualization import compare_strategies

# å®šä¹‰å¤šç§ç­–ç•¥
strategies = [
    GridSampling(spacing=100, seed=42),
    RoadNetworkSampling(spacing=100, network_type='drive', seed=42),
]

# å¯¹æ¯”è¦†ç›–æ•ˆæœ
fig = compare_strategies(strategies, aoi)
fig.savefig("strategy_comparison.png")
```



### 4.3 è¾“å‡ºæ–‡ä»¶æ ¼å¼

#### é‡‡æ ·ç‚¹ï¼ˆGeoJSONï¼‰
```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {"type": "Point", "coordinates": [114.157, 22.284]},
      "properties": {
        "sample_id": "grid_0001_0042",
        "strategy": "grid_sampling",
        "spacing_m": 100,
        "timestamp": "2025-01-21T10:30:00Z"
      }
    }
  ]
}
```

#### åè®®æ–‡ä»¶ï¼ˆYAMLï¼‰
```yaml
sampling_protocol:
  version: "0.1.0"
  timestamp: "2025-01-21T10:30:00Z"
  authors:
    - Jiale Guo <jiale.guo@mail.polimi.it>
    - Mingfeng Tang <mingfeng.tang@mail.polimi.it>

  aoi:
    description: "é¦™æ¸¯ä¸­ç¯åŒºåŸŸ"
    bounds: [114.15, 22.27, 114.18, 22.30]
    crs: "EPSG:4326"

  strategy:
    name: "grid_sampling"
    spacing: 100
    seed: 42
    parameters:
      algorithm: "regular_grid"
      alignment: "bottom_left"

  quality_metrics:
    n_points: 127
    area_km2: 2.45
    density_pts_per_km2: 51.8

  reproducibility:
    svipro_version: "0.1.0"
    python_version: "3.11.0"
    dependencies:
      geopandas: "0.14.1"
      osmnx: "2.0.0"
```

---

## 5. å¼€å‘è·¯çº¿å›¾

### é‡Œç¨‹ç¢‘1ï¼šMVPï¼ˆç¬¬1é˜¶æ®µï¼‰
- [x] é¡¹ç›®è®¾ç½®å’Œé…ç½®
- [ ] åŸºç¡€é‡‡æ ·æ¶æ„
- [ ] ç½‘æ ¼é‡‡æ ·å®ç°
- [ ] åŸºç¡€GeoJSONå¯¼å‡º
- [ ] ç®€å•CLIæ¥å£

### é‡Œç¨‹ç¢‘2ï¼šæ ¸å¿ƒåŠŸèƒ½ï¼ˆç¬¬2é˜¶æ®µï¼‰
- [ ] è·¯ç½‘é‡‡æ ·ï¼ˆOSMnxé›†æˆï¼‰
- [ ] å…ƒæ•°æ®ç®¡ç†ç³»ç»Ÿ
- [ ] è´¨é‡æŒ‡æ ‡è®¡ç®—
- [ ] åè®®ç”Ÿæˆ

### é‡Œç¨‹ç¢‘3ï¼šå¯è§†åŒ–ï¼ˆç¬¬3é˜¶æ®µï¼‰
- [ ] äº¤äº’å¼åœ°å›¾ï¼ˆfoliumï¼‰
- [ ] è¦†ç›–åˆ†æå›¾è¡¨
- [ ] ç­–ç•¥å¯¹æ¯”å·¥å…·
- [ ] æ–‡æ¡£å’Œç¤ºä¾‹

### é‡Œç¨‹ç¢‘4ï¼šæµ‹è¯•ä¸å®Œå–„ï¼ˆç¬¬4é˜¶æ®µï¼‰
- [ ] æ‰€æœ‰æ¨¡å—çš„å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ¡ˆä¾‹ç ”ç©¶éªŒè¯

---

## 6. ç ”ç©¶è´¡çŒ®

### 6.1 æ–¹æ³•å­¦è®ºæ–‡æœºä¼š

1. **"æ ‡å‡†åŒ–è¡—æ™¯å½±åƒé‡‡æ ·ï¼šåŸå¸‚ç ”ç©¶çš„å¯å¤ç°æ¡†æ¶"**
   - å½“å‰é‡‡æ ·å®è·µçš„ç³»ç»Ÿç»¼è¿°
   - æ ‡å‡†åŒ–åè®®çš„æå‡º
   - é‡‡æ ·ç­–ç•¥çš„å¯¹æ¯”ç ”ç©¶

2. **"è¯„ä¼°åŸºäºè¡—æ™¯çš„åŸå¸‚ç ”ç©¶ä¸­çš„ç©ºé—´é‡‡æ ·åå·®"**
   - é‡‡æ ·åå·®çš„å®šé‡åˆ†æ
   - å¯¹ç ”ç©¶ç»“æœçš„å½±å“
   - æœ€ä½³å®è·µå»ºè®®

### 6.2 è½¯ä»¶è®ºæ–‡

**"SVIProï¼šé¢å‘å¯å¤ç°è¡—æ™¯å½±åƒé‡‡æ ·è®¾è®¡çš„å¼€æºPythonåŒ…"**
- æœŸåˆŠï¼š*SoftwareX* æˆ– *Journal of Open Source Software*
- é‡ç‚¹ï¼šè½¯ä»¶æ¶æ„ã€ç®—æ³•å’Œæ¡ˆä¾‹ç ”ç©¶

---

## 7. åˆè§„æ€§ä¸ä¼¦ç†

### 7.1 æ— çˆ¬å–æ”¿ç­–
- âŒ æˆ‘ä»¬ä¸æ‰¹é‡ä¸‹è½½è¡—æ™¯å›¾åƒ
- âŒ æˆ‘ä»¬ä¸ç»•è¿‡APIé™åˆ¶
- âŒ æˆ‘ä»¬ä¸è¿åæœåŠ¡æ¡æ¬¾

### 7.2 æˆ‘ä»¬æä¾›çš„
- âœ… é‡‡æ ·è®¾è®¡åè®®ï¼ˆä»…åæ ‡ï¼‰
- âœ… å…ƒæ•°æ®æ–‡æ¡£æ ‡å‡†
- âœ… è´¨é‡è¯„ä¼°å·¥å…·
- âœ… åˆæ³•APIä½¿ç”¨çš„æˆæœ¬ä¼˜åŒ–

### 7.3 åˆæ³•APIä½¿ç”¨
æˆ‘ä»¬åŒ…çš„ç”¨æˆ·åº”è¯¥ï¼š
1. ä½¿ç”¨å®˜æ–¹APIï¼ˆGoogle Maps Platformã€ç™¾åº¦åœ°å›¾APIï¼‰
2. å°Šé‡é€Ÿç‡é™åˆ¶å’ŒæœåŠ¡æ¡æ¬¾
3. æ°å½“å½’å±æ•°æ®æ¥æº
4. éµå¾ªæ‰€åœ¨æœºæ„å’Œå›½å®¶çš„æ³•è§„

---

## 8. å‚è€ƒæ–‡çŒ®

**Wang et al. (2025)** - Cross-platform complementarity: Assessing the data quality and availability of Google Street View and Baidu Street View. *Transactions in Urban Data, Science, and Technology*. DOI: 10.1177/27541231241311474

**å‚è€ƒæ–‡çŒ®çš„æ ¸å¿ƒåˆ›æ–°**ï¼š
- èœ˜è››ç½‘å¼é‡‡é›†æ–¹æ³•ï¼ˆæˆ‘ä»¬æ”¹ç¼–ä¸ºå…ƒæ•°æ®åè®®ï¼‰
- å…ƒæ•°æ®é©±åŠ¨æ–¹æ³•ï¼ˆæˆ‘ä»¬å°†å…¶æ ‡å‡†åŒ–ï¼‰
- è´¨é‡è¯„ä¼°æ¡†æ¶ï¼ˆæˆ‘ä»¬è¿›è¡Œäº†æ‰©å±•ï¼‰

**æˆ‘ä»¬çš„æ”¹è¿›**ï¼š
- âœ… æ›´å¥½çš„ä»£ç ç»“æ„å’Œæ¨¡å—åŒ–
- âœ… å¯å¤ç°æ€§ä¿è¯ï¼ˆåŸºäºç§å­ï¼‰
- âœ… å…¨é¢çš„æ–‡æ¡£
- âœ… å¤šç§é‡‡æ ·ç­–ç•¥
- âœ… æ— å®é™…çˆ¬å–ï¼ˆåˆè§„ä¼˜å…ˆï¼‰
- âœ… è´¨é‡æŒ‡æ ‡å’Œåå·®æ£€æµ‹
- âœ… ç”¨æˆ·å‹å¥½çš„æ¥å£ï¼ˆPython + CLIï¼‰

---

**çŠ¶æ€**ï¼šğŸ“ è§„åˆ’é˜¶æ®µ - å¾…å®¡æ ¸

**ä¸‹ä¸€æ­¥**ï¼šç”¨æˆ·æ‰¹å‡† â†’ å¼€å§‹é‡Œç¨‹ç¢‘1çš„å®æ–½
